---
import Button from '../components/Button.astro';

const contactInfo = {
  phone: '(555) 123-4567',
  email: 'info@reapconstruction.com',
  address: '123 Construction Way, Building City, BC 12345',
  hours: 'Mon-Fri: 8AM-6PM, Sat: 9AM-2PM'
};
---

<section class="contact section bg-green" id="contact">
  <div class="contact__container">
    <div class="contact__header">
      <h2 class="contact__title">Let's Build Together</h2>
      <p class="contact__subtitle">
        Ready to start your next project? We're here to bring your vision to life.
      </p>
    </div>

    <div class="contact__content">
      <!-- Contact Information -->
      <div class="contact__info">
        <h3 class="contact__info-title">Get in Touch</h3>

        <div class="contact__info-item">
          <svg class="contact__icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
          </svg>
          <div>
            <p class="contact__info-label">Call Us</p>
            <a href={`tel:${contactInfo.phone.replace(/\D/g, '')}`} class="contact__info-value">
              {contactInfo.phone}
            </a>
          </div>
        </div>

        <div class="contact__info-item">
          <svg class="contact__icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
          </svg>
          <div>
            <p class="contact__info-label">Email Us</p>
            <a href={`mailto:${contactInfo.email}`} class="contact__info-value">
              {contactInfo.email}
            </a>
          </div>
        </div>

        <div class="contact__info-item">
          <svg class="contact__icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
          <div>
            <p class="contact__info-label">Visit Us</p>
            <p class="contact__info-value">{contactInfo.address}</p>
          </div>
        </div>

        <div class="contact__info-item">
          <svg class="contact__icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          <div>
            <p class="contact__info-label">Business Hours</p>
            <p class="contact__info-value">{contactInfo.hours}</p>
          </div>
        </div>

        <div class="contact__badges">
          <div class="contact__badge">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
            </svg>
            <span>Licensed & Insured</span>
          </div>
          <div class="contact__badge">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
            <span>Bonded & Certified</span>
          </div>
        </div>
      </div>

      <!-- Contact Form -->
      <div class="contact__form-wrapper">
        <form class="contact__form" id="contactForm">
          <h3 class="contact__form-title">Request a Consultation</h3>

          <div class="contact__form-row">
            <div class="contact__form-group">
              <label for="firstName" class="contact__form-label">First Name *</label>
              <input
                type="text"
                id="firstName"
                name="firstName"
                class="contact__form-input"
                required
              />
            </div>
            <div class="contact__form-group">
              <label for="lastName" class="contact__form-label">Last Name *</label>
              <input
                type="text"
                id="lastName"
                name="lastName"
                class="contact__form-input"
                required
              />
            </div>
          </div>

          <div class="contact__form-row">
            <div class="contact__form-group">
              <label for="email" class="contact__form-label">Email *</label>
              <input
                type="email"
                id="email"
                name="email"
                class="contact__form-input"
                required
              />
            </div>
            <div class="contact__form-group">
              <label for="phone" class="contact__form-label">Phone</label>
              <input
                type="tel"
                id="phone"
                name="phone"
                class="contact__form-input"
              />
            </div>
          </div>

          <div class="contact__form-group">
            <label for="projectType" class="contact__form-label">Project Type *</label>
            <select id="projectType" name="projectType" class="contact__form-input" required>
              <option value="">Select a project type</option>
              <option value="commercial">Commercial Construction</option>
              <option value="residential">Custom Home Building</option>
              <option value="renovation">Major Renovation</option>
              <option value="property">Property Management</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="contact__form-group">
            <label for="message" class="contact__form-label">Project Details *</label>
            <textarea
              id="message"
              name="message"
              rows="5"
              class="contact__form-input contact__form-textarea"
              placeholder="Tell us about your project..."
              required
            ></textarea>
          </div>

          <div class="contact__form-group">
            <label class="contact__form-checkbox">
              <input type="checkbox" name="newsletter" />
              <span>I'd like to receive updates about Reap Construction projects</span>
            </label>
          </div>

          <Button type="submit" variant="primary" size="large" block>
            Send Message
          </Button>

          <p class="contact__form-note">
            * Required fields. We'll respond within 24 business hours.
          </p>
        </form>
      </div>
    </div>
  </div>
</section>

<style lang="scss">
  @import '../styles/variables';
  @import '../styles/mixins';

  .contact {
    &__container {
      @include container;
    }

    &__header {
      text-align: center;
      max-width: 700px;
      margin: 0 auto $spacing-4xl;
    }

    &__title {
      font-size: $font-size-h2;
      font-family: $font-display;
      font-weight: $font-weight-bold;
      margin-bottom: $spacing-lg;
    }

    &__subtitle {
      font-size: 1.125rem;
      line-height: $line-height-relaxed;
      opacity: 0.9;
    }

    &__content {
      display: grid;
      grid-template-columns: 1fr;
      gap: $spacing-3xl;

      @include media-lg {
        grid-template-columns: 1fr 1.5fr;
      }
    }

    &__info {
      &-title {
        font-size: $font-size-h4;
        margin-bottom: $spacing-xl;
        color: $color-prestige-gold;
      }

      &-item {
        display: flex;
        gap: $spacing-lg;
        margin-bottom: $spacing-xl;
      }

      &-label {
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: $spacing-xs;
        opacity: 0.8;
      }

      &-value {
        font-size: 1rem;
        color: $color-white;
        text-decoration: none;
        transition: color $transition-fast;

        &:hover {
          color: $color-prestige-gold;
        }
      }
    }

    &__icon {
      color: $color-prestige-gold;
      flex-shrink: 0;
    }

    &__badges {
      display: flex;
      flex-wrap: wrap;
      gap: $spacing-md;
      margin-top: $spacing-2xl;
      padding-top: $spacing-2xl;
      border-top: 1px solid rgba($color-white, 0.2);
    }

    &__badge {
      display: flex;
      align-items: center;
      gap: $spacing-sm;
      padding: $spacing-sm $spacing-md;
      background: rgba($color-white, 0.1);
      border-radius: $border-radius-sm;
      font-size: 0.875rem;

      svg {
        color: $color-prestige-gold;
      }
    }

    &__form-wrapper {
      background-color: $color-white;
      border-radius: $border-radius-lg;
      padding: $spacing-2xl;

      @include media-md {
        padding: $spacing-3xl;
      }
    }

    &__form {
      &-title {
        font-size: $font-size-h4;
        color: $color-heritage-green;
        margin-bottom: $spacing-xl;
      }

      &-row {
        display: grid;
        grid-template-columns: 1fr;
        gap: $spacing-lg;

        @include media-md {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      &-group {
        margin-bottom: $spacing-lg;
      }

      &-label {
        display: block;
        font-size: 0.875rem;
        font-weight: $font-weight-medium;
        color: $color-text;
        margin-bottom: $spacing-sm;
      }

      &-input {
        width: 100%;
        padding: $spacing-md;
        border: 1px solid lighten($color-charcoal, 60%);
        border-radius: $border-radius-sm;
        background-color: $color-white;
        font-family: $font-primary;
        font-size: 1rem;
        transition: border-color $transition-fast;
        color: $color-text;

        &:focus {
          outline: none;
          border-color: $color-prestige-gold;
        }

        &::placeholder {
          color: lighten($color-charcoal, 40%);
        }
      }

      &-textarea {
        resize: vertical;
        min-height: 120px;
      }

      &-checkbox {
        display: flex;
        align-items: flex-start;
        gap: $spacing-sm;
        cursor: pointer;
        font-size: 0.875rem;
        color: $color-text;

        input[type="checkbox"] {
          width: auto;
          margin-top: 0.25rem;
          accent-color: $color-prestige-gold;
        }
      }

      &-note {
        margin-top: $spacing-lg;
        font-size: 0.875rem;
        color: $color-text-light;
        text-align: center;
      }
    }
  }
</style>

<script>
  const form = document.getElementById('contactForm') as HTMLFormElement;

  form?.addEventListener('submit', (e) => {
    e.preventDefault();

    // Get form data
    const formData = new FormData(form);
    const data = Object.fromEntries(formData);

    // Here you would normally send the data to your server
    console.log('Form submitted:', data);

    // Show success message (in production, this would be after successful API call)
    alert('Thank you for your inquiry! We\'ll be in touch within 24 business hours.');

    // Reset form
    form.reset();
  });
</script>